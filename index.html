<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KaKaReza Shooting Game</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: black; color: white; font-family: sans-serif; overflow: hidden; }
    #scoreboard {
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid white;
      padding: 10px;
      text-align: center;
      border-radius: 10px;
    }
    #scoreboard h2 {
      margin-bottom: 5px;
      font-size: 16px;
    }
    canvas { display: block; margin: 0 auto; background: #000; }
  </style>
</head>
<body>
  <div id="scoreboard">
    <h2>KaKaReza Shooting Game</h2>
    <div>Score: <span id="score">0</span></div>
    <div>Time: <span id="timer">60</span>s</div>
  </div>
  <canvas id="gameCanvas"></canvas>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const player = {
      x: canvas.width / 2,
      y: canvas.height - 60,
      width: 40,
      height: 40,
      color: "cyan",
      speed: 10
    };

    const bullets = [];
    const obstacles = [];
    let score = 0;
    let timeLeft = 60;
    let gameInterval, timerInterval;

    function drawPlayer() {
      ctx.fillStyle = player.color;
      ctx.beginPath();
      ctx.moveTo(player.x, player.y);
      ctx.lineTo(player.x - 20, player.y + 40);
      ctx.lineTo(player.x + 20, player.y + 40);
      ctx.closePath();
      ctx.fill();
    }

    function drawBullets() {
      ctx.fillStyle = "yellow";
      bullets.forEach(bullet => {
        ctx.fillRect(bullet.x, bullet.y, 4, 10);
      });
    }

    function drawObstacles() {
      obstacles.forEach(ob => {
        ctx.fillStyle = ob.color;
        ctx.fillRect(ob.x, ob.y, ob.size, ob.size);
      });
    }

    function moveBullets() {
      bullets.forEach(b => b.y -= 8);
      for (let i = bullets.length - 1; i >= 0; i--) {
        if (bullets[i].y < 0) bullets.splice(i, 1);
      }
    }

    function spawnObstacle() {
      const size = 20 + Math.random() * 20;
      obstacles.push({
        x: Math.random() * (canvas.width - size),
        y: -size,
        size: size,
        color: `hsl(${Math.random() * 360}, 70%, 50%)`
      });
    }

    function moveObstacles() {
      obstacles.forEach(ob => ob.y += 4);
      for (let i = obstacles.length - 1; i >= 0; i--) {
        if (obstacles[i].y > canvas.height) obstacles.splice(i, 1);
      }
    }

    function checkCollisions() {
      for (let i = obstacles.length - 1; i >= 0; i--) {
        for (let j = bullets.length - 1; j >= 0; j--) {
          const ob = obstacles[i];
          const b = bullets[j];
          if (
            b.x < ob.x + ob.size &&
            b.x + 4 > ob.x &&
            b.y < ob.y + ob.size &&
            b.y + 10 > ob.y
          ) {
            bullets.splice(j, 1);
            obstacles.splice(i, 1);
            score++;
            document.getElementById("score").textContent = score;
            break;
          }
        }
      }
    }

    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawPlayer();
      drawBullets();
      drawObstacles();
      moveBullets();
      moveObstacles();
      checkCollisions();
    }

    function startGame() {
      gameInterval = setInterval(gameLoop, 1000 / 60);
      timerInterval = setInterval(() => {
        timeLeft--;
        document.getElementById("timer").textContent = timeLeft;
        if (timeLeft <= 0) {
          clearInterval(gameInterval);
          clearInterval(timerInterval);
          alert("Game Over! Your score: " + score);
        }
      }, 1000);
      setInterval(spawnObstacle, 800);
    }

    let moving = false;

    canvas.addEventListener("touchstart", (e) => {
      const touchX = e.touches[0].clientX;
      const touchY = e.touches[0].clientY;
      if (touchY > canvas.height * 0.8) {
        moving = true;
        player.x = touchX;
      } else {
        bullets.push({ x: player.x, y: player.y });
      }
    });

    canvas.addEventListener("touchmove", (e) => {
      if (moving) {
        player.x = e.touches[0].clientX;
      }
    });

    canvas.addEventListener("touchend", () => {
      moving = false;
    });

    startGame();
  </script>
</body>
</html>